<app-page-header class="noPrint" title="{{'items' | translate}}" [items]="['items' | translate]" active_item="{{'view' | translate}}"></app-page-header>
<div class="row row-sm">
    <div class="col-xl-12">
      <div class="card overflow-visible ">
        <div class="card-body p-0">
          <div class="table-responsive rounded-top">
            <!-- <div class="d-flex justify-content-between bg-black-2 align-items-center px-4 rounded-top">
              <h4 class="main-content-label text-black tx-24">Items</h4>
              <a _ngcontent-xjy-c134="" routerLink="../create-items" type="button" class="btn bg-black-7 my-2 btn-icon-text d-inline-block">
                <i _ngcontent-xjy-c134="" class="fe fe-plus text-white bg-transparent"></i>
                <span _ngcontent-xjy-c134="" class="text-white">Add </span>
              </a>
            </div> -->
            <form class="pos-relative p-4">
                <div  class="form-group noPrint form-inline d-flex justify-content-between">
                    <div>
                      {{'fullTextSearch' | translate}} <input class="form-control ms-2" type="text" name="searchTerm" [(ngModel)]="service.searchTerm"/>
                      <span class="ml-3" *ngIf="service.loading$ | async">{{'loading...' | translate}}</span>
                    </div>
                    <div class="table-btns">

                      <button _ngcontent-xjy-c134="" type="button" [routerLink]="['../create-items']" class="faisal2 btn my-2 px-2 btn-icon-text " style="margin-left:0px; padding: 0px;background-color:#ddda66; "><i _ngcontent-xjy-c134=""
                        class="fe fe-plus  px-2 bg-transparent text-black" style="margin: 0 0 ;"></i><span class="faisal text-black" >{{'add' | translate}}</span></button>

                      <button (click)="generatePDF()" _ngcontent-xjy-c134="" type="button" class="btn my-2 btn-icon-text text-black" style="margin-right: 5px; padding: 5px; background-color:#fcf6b6 ; "><i _ngcontent-aph-c190="" class="mdi mdi-file-pdf text-black bg-transparent fs-18 p-0 me-1"></i>PDF</button>
                      <!-- <button _ngcontent-xjy-c134="" type="button" class="btn btn-info my-2 btn-icon-text" style="margin-right: 5px; padding: 5px;">CSV</button> -->
                      <button (click)="ExportTOExcel()" _ngcontent-xjy-c134="" type="button" class="btn my-2 btn-icon-text text-black " style="margin-right: 5px; padding: 5px;  background-color:#fcf6b6 ; "><i _ngcontent-rtg-c190="" class="mdi mdi-file-excel bg-transparent text-black fs-18 p-0 me-1"></i>XLS</button>
                      <button (click)="printPage()" _ngcontent-xjy-c134="" type="button" class="btn my-2 btn-icon-text text-black" style="margin-right: 5px; padding: 0px;  background-color:#fcf6b6 ; "><i _ngcontent-xjy-c134="" class="fe fe-printer bg-transparent  p-2 m-2"></i></button>
                      <!-- <button _ngcontent-xjy-c134="" type="button" class="btn my-2 btn-icon-text bg-black-7" style="margin-right: 5px; padding: 0px;"><i _ngcontent-xjy-c134="" class="fe fe-filter bg-transparent text-white p-2 m-2"></i></button>
                      <button _ngcontent-xjy-c134="" type="button" class="btn my-2 btn-icon-text bg-black-7" style="margin-right: 5px; padding: 0px;"><i _ngcontent-xjy-c134="" class="fe fe-delete bg-transparent text-white p-2 m-2"></i></button> -->
                    </div>
                </div>

                <table class="table table-bordered table-shopping-cart" #TABLE #table id="itemsprint" #itemsprint>

                  <tr class="text-center li">
                    <!-- <th scope="col" (sort)="onSort($event)">S.No</th> -->

                    <td scope="col" (sort)="onSort($event)">{{'ItemPicture' | translate}}</td>
                    <td scope="col" (sort)="onSort($event)">{{'itemCode' | translate}}</td>
                    <td scope="col" (sort)="onSort($event)">{{'itemName' | translate}}</td>

                    <td scope="col" (sort)="onSort($event)">{{'countryOfOrigin' | translate}}</td>
                    <td scope="col" (sort)="onSort($event)">{{'category' | translate}}</td>
                    <td scope="col" (sort)="onSort($event)">{{'unit' | translate}}</td>
                    <td scope="col" (sort)="onSort($event)">{{'subcategory' | translate}}</td>
                    <!-- <td scope="col" (sort)="onSort($event)">{{'expiryDate' | translate}}</td> -->
                    <!-- <td scope="col" (sort)="onSort($event)">{{'sellingPrice' | translate}}</td> -->
                    <!-- <td scope="col" (sort)="onSort($event)">{{'buyingPrice' | translate}}</td> -->
                    <!-- <td scope="col" (sort)="onSort($event)">{{'lastBuyingPrice' | translate}}</td> -->
                    <td scope="col" (sort)="onSort($event)">{{'vendor' | translate}}</td>
                    <td scope="col" (sort)="onSort($event)">{{'barCode' | translate}}</td>
                    <td scope="col" (sort)="onSort($event)" data-html2canvas-ignore="true" class="noPrint">{{'action' | translate}}</td>
                  </tr>

                  <tbody class="table-group-divider">
                    <tr *ngFor="let item of items">

                       <td class="d-flex justify-content-center m-sm-3"><img src="{{item.img}}" alt="" class="rounded" height="80" width="90"></td>
                       <td>{{item.itemName}}</td>
                       <td>{{item.itemCode}}</td>





                      <td>{{item.countryOfOrigin}}</td>
                      <td>{{item.category.categoryName}}</td>
                      <td>{{item.unit.unitName}}</td>
                      <td>{{item.subCategory.subcategoryName}}</td>
                      <!-- <td>{{item.expiryDate}}</td> -->
                      <!-- <td>{{item.sellingPrice}}</td> -->
                      <!-- <td>{{item.buyingPrice}}</td> -->
                      <!-- <td>{{item.lastBuyingPrice}}</td> -->
                      <td>{{item.vendor.vendorName}}</td>

                      <td ><ngx-barcode  [bc-value]="item.barCode"   [bc-line-color]="lineColor"
                        bc-element-type="svg"
                       [bc-width]="width" [bc-height]="height" [bc-display-value]="displayValue" [bc-font-options]="fontOptions" [bc-font]="font"
                       [bc-text-align]="textAlign" [bc-text-position]="textPosition" [bc-text-margin]="textMargin"
                       [bc-font-size]="fontSize" [bc-background]="background"
                       [bc-margin]="margin" [bc-margin-top]="marginTop"
                       [bc-margin-bottom]="marginBottom" [bc-margin-left]="marginLeft"
                       [bc-margin-right]="marginRight"></ngx-barcode>
                       <span style="font:2px; color:rgb(23, 23, 23);">{{item.barCode}}</span></td>

                      <td data-html2canvas-ignore="true" class="noPrint">
                        <a class="btn btn-icon-text" routerLink="../edit-items/{{item.itemsId}}"><i class="fe fe-edit text-dark bd-black" ngbTooltip="{{'update'|translate}}"></i></a>
                        <button class="btn btn-icon-text" (click)="deleteItem(item)"><i class="fe fe-trash-2 text-dark bd-black" ngbTooltip="{{'delete'|translate}}"></i></button>
                      </td>
                    </tr>
                  </tbody>
                </table>

                <div class="d-flex noPrint justify-content-between p-2">
                  <ngb-pagination
                    [collectionSize]="(total$ | async)!" [(page)]="service.page" [pageSize]="service.pageSize">
                  </ngb-pagination>


                  <ng-select class="hhhhhhhhhhhh" style="width: auto" name="pageSize" [(ngModel)]="service.pageSize">
                    <ng-option ng-option-selected value="0">--Select--</ng-option>
                    <ng-option value="2">2 items</ng-option>
                    <ng-option value="4">4 items</ng-option>
                    <ng-option value="6">6 items</ng-option>
                  </ng-select>
                </div>

              </form>
          </div>
        </div>
      </div>
    </div>
